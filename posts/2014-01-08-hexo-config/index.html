<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Yang Zhou">
    <meta name="description" content="Yang Zhou&#39;s personal website">
    <meta name="keywords" content="blog,developer,personal">

    <base href="http://halochou.github.io">
    <title>
  Hexo折腾笔记 · Yang Zhou
</title>

    <link rel="canonical" href="http://halochou.github.io/posts/2014-01-08-hexo-config/">

    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="http://halochou.github.io/css/style.min.css">

    <link rel="icon" type="image/png" href="http://halochou.github.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://halochou.github.io/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.40.3" />
  </head>

  <body>
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://halochou.github.io/">
      Yang Zhou
    </a>
    
    <ul class="navigation-list float-right">
      
      <li class="navigation-item">
        <a class="navigation-link" href="http://halochou.github.io/posts/">Blog</a>
      </li>
      
      <li class="navigation-item">
        <a class="navigation-link" href="http://halochou.github.io/about/">About</a>
      </li>
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">Hexo折腾笔记</h1>
      <h2 class="date">January 8, 2014</h2>
    </header>

    <p>第一次搭博客，发现这还真是个挺有意思的话题。</p>

<p>#平台选择
本人基本上患有选择困难症，之前用Linux的时候，每个月换一次发行版，这次挑选博客平台时又毫无意外的花了很长时间抉择。经过一般挖掘，大致有以下几个选项。</p>

<ul>
<li>Wordpress</li>
</ul>

<p>优点：主流博客平台，资源众多，易上手。</p>

<p>缺点：作为老牌平台，有些臃肿，我也不计划对PHP深挖，不便未来折腾；Wordpress.com因某些原因无法访问（You Know），其他国内平台又不大想用，自己搭的话，主页空间自由度不高，VPS又太贵~</p>

<ul>
<li>Ghost</li>
</ul>

<p>主页介绍看起来很诱人，可惜没有免费服务，只能自己在本地搭个玩玩，等以后有VPS了再折腾吧。</p>

<ul>
<li>Jekyll / Octopress</li>
</ul>

<p>Github Pages默认引擎，好多大神貌似都在用。试用了一下，还是挺不错的，符合高度定制化的Geek风格，。不过就是太折腾，都搭好了估计早就懒得写博文了……另外据说文章多了性能是个问题。</p>

<ul>
<li>Hexo</li>
</ul>

<p>最终选定Hexo，台湾同胞的作品，难望其项背啊。看看人家的功力，再看看自己…唉……</p>

<p>优点：Hexo是一个基于Node.js的博客框架，十分简约，默认主题很优雅，效率很好，而且可以生成静态网页后自动部署到Github上，一举两得。</p>

<p>缺点：还是有点小众，资源略少，出了Bug Google未必知道。</p>

<p>#Hexo安装
<a href="http://zespia.tw/hexo/docs/setup.html">Hexo官网</a>有很详细的介绍，其实只要一个命令就足够了。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">npm install -g hexo</pre></div>
<p>之后初始化自己的博客就齐了。</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo init blog</pre></div>
<p>默认目录结构：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">.
├── _config.yml
├── package.json
├── scaffolds
├── scripts
├── source
|   ├── _drafts
|   └── _posts
└── themes</pre></div>
<p>#Hexo优化
Hexo的初始配置很简约，而且默认的评论分享模块不符合天朝国情（此处省略一万字……），还是要自己打理一下才好。做了修改之后，可以用这个命令测试一下：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo server</pre></div>
<p>或者</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo s</pre></div>
<p>默认配置会在localhost:4000建立一个webserver，自行查看即可。</p>

<p>##主题
通过npm安装过来的hexo默认主题是landscape，不是传说中的light，原因不明（下一代？没light好看），有知道的朋友还望告诉一声。</p>

<p>安装light，在blog根目录下执行：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">git clone git://github.com/tommy351/hexo-theme-light.git themes/light</pre></div>
<p>修改<code>/_config.yml</code>：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">theme: light</pre></div>
<p>##图片文件夹
使用markdown写文章，插入图片的格式为<code>![图片名称](链接地址)</code>，其中链接地址是个url，这里针对hexo，可以创建<code>/source/img</code>目录，引用时用下面语句即可：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">![lable](/img/hexo-github-deploy/01.png)  </pre></div>
<p>##配置网站信息
<code>/_config.yml</code>文件存储了该blog的全局信息，修改其中Site字段：
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">    <span style="color:#007f7f"># Site</span>
    title: ZhouYang&#39;s Blog
    subtitle: Tech &amp; Life Record
    description:
    author: Zhou Yang
    email:halo.chou@gmail.com
    language: zh-CN
    <span style="color:#007f7f"># URL</span>
    url: http://halochou.github.com</code></pre></div>
##替换评论模块
hexo默认使用国外比较流行的disqus评论模块。</p>

<p>说实话，之前没研究过，原来评论系统也可以是一个单独的提供商。disqus支持的登录帐号包括Google+、Facebook……你懂了。</p>

<p>国内提供类似服务的是<a href="http://duoshuo.com">多说</a>，注册一个帐号后可以拿到针对自己的通用代码。</p>

<p>修改<code>/themes/light/layout/_partial/comment.ejs</code>，
删除原有的关于disqus和facebook的代码：</p>

<p><div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">    <span style="color:#f00">&lt;</span>% if (page.comments){ %&gt;
    &lt;<span style="font-weight:bold">section</span> <span style="color:#007f7f">id</span>=<span style="color:#0ff;font-weight:bold">&#34;comment&#34;</span>&gt;
      &lt;<span style="font-weight:bold">h1</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;title&#34;</span>&gt;<span style="color:#f00">&lt;</span>%= __(&#39;comment&#39;) %&gt;&lt;/<span style="font-weight:bold">h1</span>&gt;
      <span style="color:#0f0;font-weight:bold">&lt;! Your Code &gt;</span>
    &lt;/<span style="font-weight:bold">section</span>&gt;
    <span style="color:#f00">&lt;</span>% } %&gt;</code></pre></div>
##替换分享模块
原因同上……</p>

<p>在<a href="http://share.baidu.com/code">百度分享</a>获取代码，并在<code>themes/light/layout/_partial/article.ejs</code>中，将<code>&lt;%-partial('post/share')%&gt;</code>替换掉即可。</p>

<p>##添加Feed
虽说什么都没写呢，也根本没人来看，但是折腾是无止境的╮(╯_╰)╭</p>

<p>安装feed插件</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">npm install hexo-generator-feed</pre></div>
<p>在<code>/_config.yml</code>中，添加以下代码：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">plugins:
- hexo-generator-feed</pre></div>
<p>在<code>themes/light/_config.yml</code>中，修改：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">rss: /atom.xml</pre></div>
<p>在<code>themes/light/layout/_partial/header.ejs</code>中，<code>&lt;ul&gt;</code>和<code>&lt;/ul&gt;</code>之间，添加代码：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;li&gt; &lt;a href=&#34;/atom.xml&#34;&gt;RSS&lt;/a&gt; &lt;/li&gt;</pre></div>
<p>如果node.js正在运行，记得重启，npm安装了插件是需要重启生效的。</p>

<p>##添加sitemap模块
和添加RSS类似，执行下面命令：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">npm install hexo-generator-sitemap</pre></div>
<p>在<code>/_config.yml</code>中，添加代码：</p>

<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">    plugins:
    - hexo-generator-feed
    - hexo-generator-sitemap</code></pre></div>

<p>访问 <a href="http://halochou.github.com/sitemap.xml">http://halochou.github.com/sitemap.xml</a> 即可看到网站地图。</p>

<p>#部署GitHub
Hexo部署到GitHub是通过先生成静态网站代码，再<code>git push</code>到GitHub上完成的。
##建立GitHub Repo
首先新建一个Repo，名称应是username.github.com，如果不想放在这个域名的根目录里另有他法，之后再补充。</p>

<p>##向Hexo添加部署信息
修改<code>/_config.yml</code>：</p>

<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">    deploy:
        type: github
        repo: git@github.com:halochou/halochou.github.com.git</code></pre></div>

<p>##生成静态站点
只需要一条命令：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo generate</pre></div>
<p>或者</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo g</pre></div>
<p>##部署站点
还是只有一个命令：</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo deploy</pre></div>
<p>或者</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4">hexo d</pre></div>
<p>#Bug
我在配置Hexo过程中，出现过<code>hexo s</code>正常，但是<code>hexo g</code>报错<code>EISDIR</code>的故障，与使用<code>hexo new page &quot;about&quot;</code>有关，new page在<code>/source</code>内创建了一个文件夹，但hexo g无法识别，暂未找到解决办法，建议在配置Hexo过程中多generate，节省Debug时间。</p>

  </article>
</section>


      </div>

      <footer class="footer">
  <section class="container">
    © 2014 · Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
  </section>
</footer>

    </main>

    

  </body>

</html>
